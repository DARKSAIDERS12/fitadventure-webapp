#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–ë–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"
Telegram Web App API
"""

from flask import Flask, render_template, request, jsonify
import json
import os

app = Flask(__name__)

# === –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–†–û–î–£–ö–¢–û–í ===
PRODUCTS_DATABASE = {
    "–ø–æ—Ö—É–¥–µ–Ω–∏–µ": {
        "—Å–ª–æ–∂–Ω—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "–æ–≤—Å—è–Ω–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 389, "–±–µ–ª–∫–∏": 16.9, "–∂–∏—Ä—ã": 6.9, "—É–≥–ª–µ–≤–æ–¥—ã": 66, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10.6},
            "–≥—Ä–µ—á–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 343, "–±–µ–ª–∫–∏": 13, "–∂–∏—Ä—ã": 3.4, "—É–≥–ª–µ–≤–æ–¥—ã": 72, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10},
            "–∫–∏–Ω–æ–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 120, "–±–µ–ª–∫–∏": 4.4, "–∂–∏—Ä—ã": 1.9, "—É–≥–ª–µ–≤–æ–¥—ã": 22, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
            "–±—É–ª–≥—É—Ä": {"–∫–∞–ª–æ—Ä–∏–∏": 342, "–±–µ–ª–∫–∏": 12, "–∂–∏—Ä—ã": 1.3, "—É–≥–ª–µ–≤–æ–¥—ã": 76, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 8},
            "—Ä–∏—Å –±—É—Ä—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 337, "–±–µ–ª–∫–∏": 7.4, "–∂–∏—Ä—ã": 2.2, "—É–≥–ª–µ–≤–æ–¥—ã": 73, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.5},
            "—á–µ—á–µ–≤–∏—Ü–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 116, "–±–µ–ª–∫–∏": 9, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 20, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 7.9},
            "–Ω—É—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 164, "–±–µ–ª–∫–∏": 8.9, "–∂–∏—Ä—ã": 2.6, "—É–≥–ª–µ–≤–æ–¥—ã": 27, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 7.6},
            "—Ñ–∞—Å–æ–ª—å": {"–∫–∞–ª–æ—Ä–∏–∏": 127, "–±–µ–ª–∫–∏": 9, "–∂–∏—Ä—ã": 0.5, "—É–≥–ª–µ–≤–æ–¥—ã": 23, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.4},
        },
        "–ø—Ä–æ—Å—Ç—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "–º–µ–¥": {"–∫–∞–ª–æ—Ä–∏–∏": 304, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0, "—É–≥–ª–µ–≤–æ–¥—ã": 82, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ñ—Ä—É–∫—Ç—ã": {"–∫–∞–ª–æ—Ä–∏–∏": 52, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 14, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.4},
            "—Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã": {"–∫–∞–ª–æ—Ä–∏–∏": 240, "–±–µ–ª–∫–∏": 3.4, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 63, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 7.3},
        },
        "–±–µ–ª–∫–∏": {
            "–∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 165, "–±–µ–ª–∫–∏": 31, "–∂–∏—Ä—ã": 3.6, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–∏–Ω–¥–µ–π–∫–∞ –≥—Ä—É–¥–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 157, "–±–µ–ª–∫–∏": 29, "–∂–∏—Ä—ã": 3.6, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—è–∏—á–Ω—ã–µ –±–µ–ª–∫–∏": {"–∫–∞–ª–æ—Ä–∏–∏": 52, "–±–µ–ª–∫–∏": 11, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 0.7, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ç–≤–æ—Ä–æ–≥ –æ–±–µ–∑–∂–∏—Ä–µ–Ω–Ω—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 88, "–±–µ–ª–∫–∏": 18, "–∂–∏—Ä—ã": 0.6, "—É–≥–ª–µ–≤–æ–¥—ã": 1.8, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ä—ã–±–∞ –±–µ–ª–∞—è": {"–∫–∞–ª–æ—Ä–∏–∏": 72, "–±–µ–ª–∫–∏": 16, "–∂–∏—Ä—ã": 0.9, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–∫—Ä–µ–≤–µ—Ç–∫–∏": {"–∫–∞–ª–æ—Ä–∏–∏": 99, "–±–µ–ª–∫–∏": 24, "–∂–∏—Ä—ã": 0.3, "—É–≥–ª–µ–≤–æ–¥—ã": 0.2, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–ø—Ä–æ—Ç–µ–∏–Ω –∏–∑–æ–ª—è—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 350, "–±–µ–ª–∫–∏": 85, "–∂–∏—Ä—ã": 1, "—É–≥–ª–µ–≤–æ–¥—ã": 5, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "–∞–≤–æ–∫–∞–¥–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 160, "–±–µ–ª–∫–∏": 2, "–∂–∏—Ä—ã": 15, "—É–≥–ª–µ–≤–æ–¥—ã": 9, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.7},
            "–æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 884, "–±–µ–ª–∫–∏": 0, "–∂–∏—Ä—ã": 100, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–æ—Ä–µ—Ö–∏ –≥—Ä–µ—Ü–∫–∏–µ": {"–∫–∞–ª–æ—Ä–∏–∏": 654, "–±–µ–ª–∫–∏": 15, "–∂–∏—Ä—ã": 65, "—É–≥–ª–µ–≤–æ–¥—ã": 14, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.7},
            "–º–∏–Ω–¥–∞–ª—å": {"–∫–∞–ª–æ—Ä–∏–∏": 579, "–±–µ–ª–∫–∏": 21, "–∂–∏—Ä—ã": 50, "—É–≥–ª–µ–≤–æ–¥—ã": 22, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 12.5},
            "—Å–µ–º–µ–Ω–∞ –ª—å–Ω–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 534, "–±–µ–ª–∫–∏": 18, "–∂–∏—Ä—ã": 42, "—É–≥–ª–µ–≤–æ–¥—ã": 29, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 27.3},
            "—Å–µ–º–µ–Ω–∞ —á–∏–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 486, "–±–µ–ª–∫–∏": 17, "–∂–∏—Ä—ã": 31, "—É–≥–ª–µ–≤–æ–¥—ã": 42, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 34.4},
        },
        "–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 717, "–±–µ–ª–∫–∏": 0.9, "–∂–∏—Ä—ã": 81, "—É–≥–ª–µ–≤–æ–¥—ã": 0.1, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Å—ã—Ä —Ç–≤–µ—Ä–¥—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 350, "–±–µ–ª–∫–∏": 25, "–∂–∏—Ä—ã": 27, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": {
            "–±—Ä–æ–∫–∫–æ–ª–∏": {"–∫–∞–ª–æ—Ä–∏–∏": 34, "–±–µ–ª–∫–∏": 2.8, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 7, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.6},
            "—Ü–≤–µ—Ç–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 25, "–±–µ–ª–∫–∏": 1.9, "–∂–∏—Ä—ã": 0.3, "—É–≥–ª–µ–≤–æ–¥—ã": 5, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.5},
            "—à–ø–∏–Ω–∞—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 23, "–±–µ–ª–∫–∏": 2.9, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 3.6, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.2},
            "–∫–∞–ø—É—Å—Ç–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 25, "–±–µ–ª–∫–∏": 1.3, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 5.8, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.5},
            "–º–æ—Ä–∫–æ–≤—å": {"–∫–∞–ª–æ—Ä–∏–∏": 41, "–±–µ–ª–∫–∏": 0.9, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 10, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
            "—Å–≤–µ–∫–ª–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 43, "–±–µ–ª–∫–∏": 1.6, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 10, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
        }
    },
    
    "–Ω–∞–±–æ—Ä_–º–∞—Å—Å—ã": {
        "—Å–ª–æ–∂–Ω—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "—Ä–∏—Å –±–µ–ª—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 344, "–±–µ–ª–∫–∏": 6.7, "–∂–∏—Ä—ã": 0.7, "—É–≥–ª–µ–≤–æ–¥—ã": 78, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
            "—Ä–∏—Å –±—É—Ä—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 337, "–±–µ–ª–∫–∏": 7.4, "–∂–∏—Ä—ã": 2.2, "—É–≥–ª–µ–≤–æ–¥—ã": 73, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.5},
            "–≥—Ä–µ—á–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 343, "–±–µ–ª–∫–∏": 13, "–∂–∏—Ä—ã": 3.4, "—É–≥–ª–µ–≤–æ–¥—ã": 72, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10},
            "–æ–≤—Å—è–Ω–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 389, "–±–µ–ª–∫–∏": 16.9, "–∂–∏—Ä—ã": 6.9, "—É–≥–ª–µ–≤–æ–¥—ã": 66, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10.6},
            "–º–∞–∫–∞—Ä–æ–Ω—ã": {"–∫–∞–ª–æ—Ä–∏–∏": 371, "–±–µ–ª–∫–∏": 13, "–∂–∏—Ä—ã": 1.5, "—É–≥–ª–µ–≤–æ–¥—ã": 75, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.2},
            "–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å": {"–∫–∞–ª–æ—Ä–∏–∏": 77, "–±–µ–ª–∫–∏": 2, "–∂–∏—Ä—ã": 0.1, "—É–≥–ª–µ–≤–æ–¥—ã": 17, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.2},
            "–±–∞—Ç–∞—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 86, "–±–µ–ª–∫–∏": 1.6, "–∂–∏—Ä—ã": 0.1, "—É–≥–ª–µ–≤–æ–¥—ã": 20, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3},
        },
        "–ø—Ä–æ—Å—Ç—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "–º–µ–¥": {"–∫–∞–ª–æ—Ä–∏–∏": 304, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0, "—É–≥–ª–µ–≤–æ–¥—ã": 82, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–±–∞–Ω–∞–Ω": {"–∫–∞–ª–æ—Ä–∏–∏": 89, "–±–µ–ª–∫–∏": 1.1, "–∂–∏—Ä—ã": 0.3, "—É–≥–ª–µ–≤–æ–¥—ã": 23, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.6},
            "–≤–∏–Ω–æ–≥—Ä–∞–¥": {"–∫–∞–ª–æ—Ä–∏–∏": 62, "–±–µ–ª–∫–∏": 0.6, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 16, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0.9},
            "—Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã": {"–∫–∞–ª–æ—Ä–∏–∏": 240, "–±–µ–ª–∫–∏": 3.4, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 63, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 7.3},
        },
        "–±–µ–ª–∫–∏": {
            "–∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 165, "–±–µ–ª–∫–∏": 31, "–∂–∏—Ä—ã": 3.6, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–≥–æ–≤—è–¥–∏–Ω–∞ –ø–æ—Å—Ç–Ω–∞—è": {"–∫–∞–ª–æ—Ä–∏–∏": 250, "–±–µ–ª–∫–∏": 26, "–∂–∏—Ä—ã": 15, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Å–≤–∏–Ω–∏–Ω–∞ –ø–æ—Å—Ç–Ω–∞—è": {"–∫–∞–ª–æ—Ä–∏–∏": 242, "–±–µ–ª–∫–∏": 27, "–∂–∏—Ä—ã": 14, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—è–π—Ü–∞ –∫—É—Ä–∏–Ω—ã–µ": {"–∫–∞–ª–æ—Ä–∏–∏": 157, "–±–µ–ª–∫–∏": 12.7, "–∂–∏—Ä—ã": 11.5, "—É–≥–ª–µ–≤–æ–¥—ã": 0.7, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–ª–æ—Å–æ—Å—å": {"–∫–∞–ª–æ—Ä–∏–∏": 208, "–±–µ–ª–∫–∏": 20, "–∂–∏—Ä—ã": 13, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ç—É–Ω–µ—Ü": {"–∫–∞–ª–æ—Ä–∏–∏": 144, "–±–µ–ª–∫–∏": 30, "–∂–∏—Ä—ã": 1, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ç–≤–æ—Ä–æ–≥ 5%": {"–∫–∞–ª–æ—Ä–∏–∏": 121, "–±–µ–ª–∫–∏": 17, "–∂–∏—Ä—ã": 5, "—É–≥–ª–µ–≤–æ–¥—ã": 1.8, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–ø—Ä–æ—Ç–µ–∏–Ω —Å—ã–≤–æ—Ä–æ—Ç–æ—á–Ω—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 375, "–±–µ–ª–∫–∏": 80, "–∂–∏—Ä—ã": 4, "—É–≥–ª–µ–≤–æ–¥—ã": 8, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "–æ—Ä–µ—Ö–∏ –≥—Ä–µ—Ü–∫–∏–µ": {"–∫–∞–ª–æ—Ä–∏–∏": 654, "–±–µ–ª–∫–∏": 15, "–∂–∏—Ä—ã": 65, "—É–≥–ª–µ–≤–æ–¥—ã": 14, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.7},
            "–º–∏–Ω–¥–∞–ª—å": {"–∫–∞–ª–æ—Ä–∏–∏": 579, "–±–µ–ª–∫–∏": 21, "–∂–∏—Ä—ã": 50, "—É–≥–ª–µ–≤–æ–¥—ã": 22, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 12.5},
            "–∫–µ—à—å—é": {"–∫–∞–ª–æ—Ä–∏–∏": 553, "–±–µ–ª–∫–∏": 18, "–∂–∏—Ä—ã": 44, "—É–≥–ª–µ–≤–æ–¥—ã": 30, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.3},
            "–∞—Ä–∞—Ö–∏—Å": {"–∫–∞–ª–æ—Ä–∏–∏": 567, "–±–µ–ª–∫–∏": 26, "–∂–∏—Ä—ã": 49, "—É–≥–ª–µ–≤–æ–¥—ã": 16, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 8.5},
            "–∞–≤–æ–∫–∞–¥–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 160, "–±–µ–ª–∫–∏": 2, "–∂–∏—Ä—ã": 15, "—É–≥–ª–µ–≤–æ–¥—ã": 9, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.7},
            "–æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 884, "–±–µ–ª–∫–∏": 0, "–∂–∏—Ä—ã": 100, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 717, "–±–µ–ª–∫–∏": 0.9, "–∂–∏—Ä—ã": 81, "—É–≥–ª–µ–≤–æ–¥—ã": 0.1, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Å—ã—Ä —Ç–≤–µ—Ä–¥—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 350, "–±–µ–ª–∫–∏": 25, "–∂–∏—Ä—ã": 27, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Å–º–µ—Ç–∞–Ω–∞ 20%": {"–∫–∞–ª–æ—Ä–∏–∏": 206, "–±–µ–ª–∫–∏": 2.5, "–∂–∏—Ä—ã": 20, "—É–≥–ª–µ–≤–æ–¥—ã": 3.4, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": {
            "–±—Ä–æ–∫–∫–æ–ª–∏": {"–∫–∞–ª–æ—Ä–∏–∏": 34, "–±–µ–ª–∫–∏": 2.8, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 7, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.6},
            "—à–ø–∏–Ω–∞—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 23, "–±–µ–ª–∫–∏": 2.9, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 3.6, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.2},
            "–º–æ—Ä–∫–æ–≤—å": {"–∫–∞–ª–æ—Ä–∏–∏": 41, "–±–µ–ª–∫–∏": 0.9, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 10, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
            "—è–±–ª–æ–∫–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 52, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 14, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.4},
            "–≥—Ä—É—à–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 57, "–±–µ–ª–∫–∏": 0.4, "–∂–∏—Ä—ã": 0.1, "—É–≥–ª–µ–≤–æ–¥—ã": 15, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.1},
        }
    },
    
    "–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ": {
        "—Å–ª–æ–∂–Ω—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "–æ–≤—Å—è–Ω–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 389, "–±–µ–ª–∫–∏": 16.9, "–∂–∏—Ä—ã": 6.9, "—É–≥–ª–µ–≤–æ–¥—ã": 66, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10.6},
            "–≥—Ä–µ—á–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 343, "–±–µ–ª–∫–∏": 13, "–∂–∏—Ä—ã": 3.4, "—É–≥–ª–µ–≤–æ–¥—ã": 72, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 10},
            "—Ä–∏—Å –±—É—Ä—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 337, "–±–µ–ª–∫–∏": 7.4, "–∂–∏—Ä—ã": 2.2, "—É–≥–ª–µ–≤–æ–¥—ã": 73, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 3.5},
            "–∫–∏–Ω–æ–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 120, "–±–µ–ª–∫–∏": 4.4, "–∂–∏—Ä—ã": 1.9, "—É–≥–ª–µ–≤–æ–¥—ã": 22, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
            "—á–µ—á–µ–≤–∏—Ü–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 116, "–±–µ–ª–∫–∏": 9, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 20, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 7.9},
        },
        "–ø—Ä–æ—Å—Ç—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": {
            "–º–µ–¥": {"–∫–∞–ª–æ—Ä–∏–∏": 304, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0, "—É–≥–ª–µ–≤–æ–¥—ã": 82, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ñ—Ä—É–∫—Ç—ã": {"–∫–∞–ª–æ—Ä–∏–∏": 52, "–±–µ–ª–∫–∏": 0.3, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 14, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.4},
        },
        "–±–µ–ª–∫–∏": {
            "–∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 165, "–±–µ–ª–∫–∏": 31, "–∂–∏—Ä—ã": 3.6, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–∏–Ω–¥–µ–π–∫–∞ –≥—Ä—É–¥–∫–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 157, "–±–µ–ª–∫–∏": 29, "–∂–∏—Ä—ã": 3.6, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ç–≤–æ—Ä–æ–≥ 5%": {"–∫–∞–ª–æ—Ä–∏–∏": 121, "–±–µ–ª–∫–∏": 17, "–∂–∏—Ä—ã": 5, "—É–≥–ª–µ–≤–æ–¥—ã": 1.8, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "—Ä—ã–±–∞ –±–µ–ª–∞—è": {"–∫–∞–ª–æ—Ä–∏–∏": 72, "–±–µ–ª–∫–∏": 16, "–∂–∏—Ä—ã": 0.9, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "–∞–≤–æ–∫–∞–¥–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 160, "–±–µ–ª–∫–∏": 2, "–∂–∏—Ä—ã": 15, "—É–≥–ª–µ–≤–æ–¥—ã": 9, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 6.7},
            "–æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ": {"–∫–∞–ª–æ—Ä–∏–∏": 884, "–±–µ–ª–∫–∏": 0, "–∂–∏—Ä—ã": 100, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
            "–º–∏–Ω–¥–∞–ª—å": {"–∫–∞–ª–æ—Ä–∏–∏": 579, "–±–µ–ª–∫–∏": 21, "–∂–∏—Ä—ã": 50, "—É–≥–ª–µ–≤–æ–¥—ã": 22, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 12.5},
            "—Å–µ–º–µ–Ω–∞ –ª—å–Ω–∞": {"–∫–∞–ª–æ—Ä–∏–∏": 534, "–±–µ–ª–∫–∏": 18, "–∂–∏—Ä—ã": 42, "—É–≥–ª–µ–≤–æ–¥—ã": 29, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 27.3},
        },
        "–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": {
            "—Å—ã—Ä —Ç–≤–µ—Ä–¥—ã–π": {"–∫–∞–ª–æ—Ä–∏–∏": 350, "–±–µ–ª–∫–∏": 25, "–∂–∏—Ä—ã": 27, "—É–≥–ª–µ–≤–æ–¥—ã": 0, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 0},
        },
        "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": {
            "–±—Ä–æ–∫–∫–æ–ª–∏": {"–∫–∞–ª–æ—Ä–∏–∏": 34, "–±–µ–ª–∫–∏": 2.8, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 7, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.6},
            "—à–ø–∏–Ω–∞—Ç": {"–∫–∞–ª–æ—Ä–∏–∏": 23, "–±–µ–ª–∫–∏": 2.9, "–∂–∏—Ä—ã": 0.4, "—É–≥–ª–µ–≤–æ–¥—ã": 3.6, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.2},
            "–º–æ—Ä–∫–æ–≤—å": {"–∫–∞–ª–æ—Ä–∏–∏": 41, "–±–µ–ª–∫–∏": 0.9, "–∂–∏—Ä—ã": 0.2, "—É–≥–ª–µ–≤–æ–¥—ã": 10, "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": 2.8},
        }
    }
}

def search_product(product_name):
    """–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é"""
    results = {}
    product_name_lower = product_name.lower()
    
    for goal, categories in PRODUCTS_DATABASE.items():
        results[goal] = {}
        for category, products in categories.items():
            matches = {}
            for name, data in products.items():
                if product_name_lower in name.lower():
                    matches[name] = data
            if matches:
                results[goal][category] = matches
    
    return results

@app.route('/')
def index():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    return render_template('index.html')

@app.route('/api/products/<goal>')
def get_products_by_goal(goal):
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ —Ü–µ–ª–∏"""
    if goal in PRODUCTS_DATABASE:
        return jsonify(PRODUCTS_DATABASE[goal])
    return jsonify({})

@app.route('/api/search/<query>')
def search_products(query):
    """API –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤"""
    results = search_product(query)
    return jsonify(results)

@app.route('/api/categories')
def get_categories():
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π"""
    categories = {
        "—Å–ª–æ–∂–Ω—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": "üåæ –°–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã",
        "–ø—Ä–æ—Å—Ç—ã–µ_—É–≥–ª–µ–≤–æ–¥—ã": "‚ö° –ü—Ä–æ—Å—Ç—ã–µ —É–≥–ª–µ–≤–æ–¥—ã",
        "–±–µ–ª–∫–∏": "ü•© –ë–µ–ª–∫–∏",
        "–Ω–µ–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": "ü´í –ù–µ–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ –∂–∏—Ä—ã",
        "–Ω–∞—Å—ã—â–µ–Ω–Ω—ã–µ_–∂–∏—Ä—ã": "üßà –ù–∞—Å—ã—â–µ–Ω–Ω—ã–µ –∂–∏—Ä—ã",
        "–∫–ª–µ—Ç—á–∞—Ç–∫–∞": "üåø –ö–ª–µ—Ç—á–∞—Ç–∫–∞"
    }
    return jsonify(categories)

@app.route('/api/goals')
def get_goals():
    """API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–ª–µ–π"""
    goals = {
        "–ø–æ—Ö—É–¥–µ–Ω–∏–µ": "–ü–æ—Ö—É–¥–µ–Ω–∏–µ",
        "–Ω–∞–±–æ—Ä_–º–∞—Å—Å—ã": "–ù–∞–±–æ—Ä –º–∞—Å—Å—ã",
        "–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ": "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã"
    }
    return jsonify(goals)

if __name__ == '__main__':
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Ä—Ç –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–≤)
    port = int(os.environ.get('PORT', 5000))
    app.run(debug=False, host='0.0.0.0', port=port) 